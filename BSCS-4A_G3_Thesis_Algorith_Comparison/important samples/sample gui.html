<!DOCTYPE html>
<html>
<head>
    <title>Advanced Pathfinding Algorithm Comparator</title>
    <style>
        body {
            font-family: Arial;
            margin: 0;
            display: flex;
            height: 100vh;
        }

        #controls {
            width: 320px;
            background: #1f2937;
            color: white;
            padding: 15px;
            overflow-y: auto;
        }

        #grid-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        #grid {
            display: grid;
            background: #e5e7eb;
            flex: 1;
        }

        .cell {
            border: 1px solid #d1d5db;
            background: white;
        }

        .obstacle { background: black; }
        .start { background: green; }
        .goal { background: red; }
        .path { background: yellow; }

        button, select, input {
            width: 100%;
            margin-bottom: 10px;
            padding: 6px;
        }

        canvas {
            background: white;
            margin-top: 10px;
        }

        #dashboard {
            background: #111827;
            padding: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div id="controls">
    <h2>Algorithm Comparator</h2>

    <label>Grid Size</label>
    <input type="number" id="gridSize" value="20">

    <button onclick="generateGrid()">Generate Grid</button>

    <label>Select Algorithm</label>
    <select id="algorithmSelect">
        <option>D* Lite</option>
        <option>ARA*</option>
        <option>AD*</option>
        <option>Theta*</option>
        <option>Field D*</option>
    </select>

    <label>Terrain Weight</label>
    <input type="range" id="terrainWeight" min="1" max="10" value="1">

    <label>
        <input type="checkbox" id="realTimeToggle">
        Real-Time Rerouting
    </label>

    <button onclick="runAlgorithm()">Run Algorithm</button>
    <button onclick="batchTest()">Batch Testing</button>
    <button onclick="scalabilityTest()">Scalability Test</button>
    <button onclick="clearGrid()">Clear Grid</button>

    <h3>Performance Dashboard</h3>
    <div id="dashboard">
        Nodes Expanded: <span id="nodes">0</span><br>
        Path Cost: <span id="cost">0</span><br>
        Time (ms): <span id="time">0</span>
    </div>

    <h3>Graph</h3>
    <canvas id="graph" width="280" height="200"></canvas>

</div>

<div id="grid-container">
    <div id="grid"></div>
</div>

<script>
let gridSize = 20;
let gridData = [];
let logs = [];

function generateGrid() {
    gridSize = parseInt(document.getElementById("gridSize").value);
    const grid = document.getElementById("grid");
    grid.innerHTML = "";
    grid.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
    gridData = [];

    for (let i = 0; i < gridSize * gridSize; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.onclick = () => toggleObstacle(cell, i);
        grid.appendChild(cell);
        gridData.push(0);
    }
}

function toggleObstacle(cell, index) {
    if (gridData[index] === 0) {
        gridData[index] = 1;
        cell.classList.add("obstacle");
    } else {
        gridData[index] = 0;
        cell.classList.remove("obstacle");
    }
}

function runAlgorithm() {
    const algorithm = document.getElementById("algorithmSelect").value;
    const startTime = performance.now();

    let nodesExpanded = Math.floor(Math.random() * 500);
    let cost = Math.floor(Math.random() * 200);

    const endTime = performance.now();

    document.getElementById("nodes").innerText = nodesExpanded;
    document.getElementById("cost").innerText = cost;
    document.getElementById("time").innerText = (endTime - startTime).toFixed(2);

    logs.push({algorithm, nodesExpanded, cost});
    drawGraph();
}

function batchTest() {
    for (let i = 0; i < 10; i++) {
        runAlgorithm();
    }
    alert("Batch testing completed.");
}

function scalabilityTest() {
    for (let size = 10; size <= 50; size += 10) {
        document.getElementById("gridSize").value = size;
        generateGrid();
        runAlgorithm();
    }
    alert("Scalability test completed.");
}

function clearGrid() {
    generateGrid();
}

function drawGraph() {
    const canvas = document.getElementById("graph");
    const ctx = canvas.getContext("2d");

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    logs.forEach((log, index) => {
        ctx.fillStyle = "blue";
        ctx.fillRect(index * 20, canvas.height - log.nodesExpanded/3, 10, log.nodesExpanded/3);
    });
}

generateGrid();
</script>

</body>
</html>
